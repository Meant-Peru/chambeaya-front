{"ast":null,"code":"import _defineProperty from\"C:/Users/user/Documents/backut/chambeaya-front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/user/Documents/backut/chambeaya-front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/user/Documents/backut/chambeaya-front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/user/Documents/backut/chambeaya-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Documents/backut/chambeaya-front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\Documents\\\\backut\\\\chambeaya-front\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import Header from'../components/shared/header';import{Tab,Tabs,TabList,TabPanel}from'react-tabs';import toast,{Toaster}from'react-hot-toast';import{Txtfield,DropdownMenu,DropdownItem,BtnPrimary}from'../components/shared/styled';import'react-tabs/style/react-tabs.css';import'./../sass/pages/_applyJob.scss';import Footer from'../components/shared/footer';import{useTab}from'../hooks/useTab';import{useNavigate}from'react-router-dom';import{getCategory,getSkillForCategory}from'../util/publication.service';import{TagComponent}from'../components/shared/atom/tag';import{clearOneLocalStorage,getLocalStorage}from'../helpers/localStorage';import{CREATE_USER,TEM_USER,USER_EXISTING}from'../helpers/constants';import{register}from'../util/auth.service';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var RegisterPostulant=function RegisterPostulant(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categorys=_useState4[0],setCategorys=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),skills=_useState6[0],setSkills=_useState6[1];// const { handleForm, reset } = usePostForm();\nvar _React$useState=React.useState({documentType:'',documentNumber:'',category:'',skillsIds:[],typeBio:'',linkBio:'',experience:[],project:'',timeProject:'',functions:''}),_React$useState2=_slicedToArray(_React$useState,2),form=_React$useState2[0],setForm=_React$useState2[1];var reset=function reset(){setForm({documentType:'',documentNumber:'',category:'',skillsIds:[],typeBio:'',linkBio:'',experience:[],project:'',timeProject:'',functions:''});};// const navigate = useNavigate();\nvar _useTab=useTab(),selectedTab=_useTab.selectedTab,handleNextTab=_useTab.handleNextTab,setSelectedTab=_useTab.setSelectedTab;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCategoryAll();case 2:case\"end\":return _context.stop();}}},_callee);}))();},[]);useEffect(function(){// console.log('listar categoria');\n// console.log(form.category);\n_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getSkillsForCategory(form.category);case 2:case\"end\":return _context2.stop();}}},_callee2);}))();},[form.category]);var getSkillsForCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idCategory){var response,newData,uniquesSkills;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getSkillForCategory({idCategory:idCategory});case 2:response=_context3.sent;if(response.status){newData=response===null||response===void 0?void 0:response.data.skillGeneral.map(function(s){return{_id:s._id,nameSkill:s.nameSkill,select:false};});uniquesSkills=_toConsumableArray(new Map(newData.map(function(i){return[i._id,i];})).values());// console.log({ uniquesSkills });\nsetSkills(_toConsumableArray(uniquesSkills));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function getSkillsForCategory(_x){return _ref3.apply(this,arguments);};}();var handleForm=function handleForm(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var getCategoryAll=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getCategory();case 2:response=_context4.sent;console.log({response:response});if(response.status)setCategorys(response===null||response===void 0?void 0:response.data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function getCategoryAll(){return _ref4.apply(this,arguments);};}();var handleRegister2=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){var tempUser,skillSelect,selectCategory,dataSend,response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();setLoading(true);tempUser=getLocalStorage(TEM_USER);// console.log({ tempUser });\nskillSelect=[];skills.filter(function(s){return s.select&&skillSelect.push(s._id);});selectCategory=categorys.find(function(c){return c._id===form.category;});dataSend=_objectSpread(_objectSpread({},tempUser),{},{dataUser:_objectSpread(_objectSpread(_objectSpread({},tempUser.dataUser),form),{},{category:selectCategory,skillsIds:[].concat(skillSelect)})});console.log({dataSend:dataSend});_context5.next=10;return register(dataSend);case 10:response=_context5.sent;_context5.t0=response.data.message;_context5.next=_context5.t0===CREATE_USER?14:_context5.t0===USER_EXISTING?19:21;break;case 14:clearOneLocalStorage(TEM_USER);reset();toast.success('Se creo el usuario correctamente...');setTimeout(function(){setLoading(false);navigate('/login',{replace:true});},2000);return _context5.abrupt(\"return\");case 19:toast.error('el usuario ya existe');// alert('el usuario ya existe');\nreturn _context5.abrupt(\"return\");case 21:toast.error('error en el servidor');// alert('Error corregir esto :c');\nreturn _context5.abrupt(\"break\",23);case 23:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRegister2(_x2){return _ref5.apply(this,arguments);};}();var selectItemSkill=function selectItemSkill(skill){var newData=[];skills.filter(function(s){if(s._id===skill._id){s.select=!s.select;}newData.push(s);});setSkills([].concat(newData));};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",reverseOrder:false}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"applyJob\",children:[/*#__PURE__*/_jsx(\"aside\",{className:\"coverHeader mb-5\"}),/*#__PURE__*/_jsx(\"aside\",{className:\"contain\",children:/*#__PURE__*/_jsxs(Tabs,{selectedIndex:selectedTab,onSelect:function onSelect(index){return setSelectedTab(index);},children:[/*#__PURE__*/_jsxs(TabList,{className:'mb-5',children:[/*#__PURE__*/_jsx(Tab,{tabIndex:'0',children:\"Datos generales\"}),/*#__PURE__*/_jsx(Tab,{tabIndex:'1',children:\"Skills\"}),/*#__PURE__*/_jsx(Tab,{tabIndex:'2',children:\"Experiencia\"})]}),/*#__PURE__*/_jsx(TabPanel,{tabIndex:0,children:/*#__PURE__*/_jsxs(\"section\",{className:\"formApply pt-5\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-3\",children:\"Comprobante de pago a emitir\"}),/*#__PURE__*/_jsxs(\"aside\",{className:\"FormGroup\",children:[/*#__PURE__*/_jsxs(DropdownMenu,{onChange:handleForm,name:\"documentType\",value:form.documentType,children:[/*#__PURE__*/_jsx(DropdownItem,{children:\"Elige el tipo de documento\"}),/*#__PURE__*/_jsx(DropdownItem,{value:\"1\",children:\"RUC\"}),/*#__PURE__*/_jsx(DropdownItem,{value:\"2\",children:\"DNI\"})]}),/*#__PURE__*/_jsx(Txtfield,{className:\"ml-5\",placeholder:\"Nro de documento\",name:\"documentNumber\",onChange:handleForm,value:form.documentNumber})]})]}),/*#__PURE__*/_jsx(\"article\",{className:\"footerSection\",children:/*#__PURE__*/_jsxs(BtnPrimary,{type:\"button\",onClick:handleNextTab,children:[' ',\"Siguiente\",' ']})})]})}),/*#__PURE__*/_jsx(TabPanel,{tabIndex:1,children:/*#__PURE__*/_jsxs(\"section\",{className:\"formApply pt-5\",children:[/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-3\",children:\"Eligue tu especialidad\"}),/*#__PURE__*/_jsx(\"aside\",{className:\"FormGroup\",children:/*#__PURE__*/_jsxs(DropdownMenu,{onChange:handleForm,name:\"category\",value:form.category,children:[/*#__PURE__*/_jsx(DropdownItem,{children:\"Eliga su especialidad\"}),categorys.map(function(category){return/*#__PURE__*/_jsx(DropdownItem,{value:category._id,children:category.nameCategory},category._id);})]})})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Elige las skills que mejor manejes\"}),/*#__PURE__*/_jsx(\"article\",{className:\"gridBox mt-4\",children:skills.map(function(e){return/*#__PURE__*/_jsx(TagComponent,{tag:e,select:e.select,event:function event(e){return selectItemSkill(e);}},e._id);})}),/*#__PURE__*/_jsx(\"article\",{className:\"footerSection\",children:/*#__PURE__*/_jsxs(BtnPrimary,{type:\"button\",onClick:handleNextTab,children:[' ',\"Siguiente\",' ']})})]})}),/*#__PURE__*/_jsx(TabPanel,{tabIndex:2,children:/*#__PURE__*/_jsxs(\"section\",{className:\"formApply pt-5\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 text-center\",children:\"Enlace digital de experiencia laboral (Certijoven, Linkedin, Web, etc)\"}),/*#__PURE__*/_jsxs(\"aside\",{className:\"FormGroup\",children:[/*#__PURE__*/_jsxs(DropdownMenu,{onChange:handleForm,name:\"typeBio\",value:form.typeBio,children:[/*#__PURE__*/_jsx(DropdownItem,{children:\"Seleccione tipo de enlace \"}),/*#__PURE__*/_jsx(DropdownItem,{value:\"1\",children:\"Linkedin\"}),/*#__PURE__*/_jsx(DropdownItem,{value:\"2\",children:\"Web\"})]}),/*#__PURE__*/_jsx(Txtfield,{className:\"ml-5\",placeholder:\"Ingrese enlace\",onChange:handleForm,name:\"linkBio\",value:form.linkBio})]})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center mb-3\",children:\"\\xF3 , coloca tu experiencia respecto al puesto que buscamos\"}),/*#__PURE__*/_jsxs(\"aside\",{className:\"FormGroup\",children:[/*#__PURE__*/_jsx(Txtfield,{className:\"mr-5\",placeholder:\"Proyecto\",onChange:handleForm,name:\"project\",value:form.project}),/*#__PURE__*/_jsx(Txtfield,{className:\"\",placeholder:\"Tiempo de trabajo\",onChange:handleForm,name:\"timeProject\",value:form.timeProject})]}),/*#__PURE__*/_jsx(\"aside\",{className:\"FormGroup-full mt-4\",children:/*#__PURE__*/_jsx(Txtfield,{placeholder:\"Funciones que realizaste\",onChange:handleForm,name:\"functions\",value:form.functions})})]}),/*#__PURE__*/_jsx(\"article\",{className:\"footerSection\",children:/*#__PURE__*/_jsx(BtnPrimary,{disabled:loading,onClick:handleRegister2,children:\"Registrar\"})})]})})]})})]})}),/*#__PURE__*/_jsx(Footer,{})]});};","map":{"version":3,"sources":["C:/Users/user/Documents/backut/chambeaya-front/src/pages/registerPostulant.tsx"],"names":["React","useEffect","useState","Header","Tab","Tabs","TabList","TabPanel","toast","Toaster","Txtfield","DropdownMenu","DropdownItem","BtnPrimary","Footer","useTab","useNavigate","getCategory","getSkillForCategory","TagComponent","clearOneLocalStorage","getLocalStorage","CREATE_USER","TEM_USER","USER_EXISTING","register","RegisterPostulant","navigate","loading","setLoading","categorys","setCategorys","skills","setSkills","documentType","documentNumber","category","skillsIds","typeBio","linkBio","experience","project","timeProject","functions","form","setForm","reset","selectedTab","handleNextTab","setSelectedTab","getCategoryAll","getSkillsForCategory","idCategory","response","status","newData","data","skillGeneral","map","s","_id","nameSkill","select","uniquesSkills","Map","i","values","handleForm","event","target","name","value","console","log","handleRegister2","e","preventDefault","tempUser","skillSelect","filter","push","selectCategory","find","c","dataSend","dataUser","message","success","setTimeout","replace","error","selectItemSkill","skill","index","nameCategory"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from '../components/shared/header';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CheckButton from '../components/shared/atom/checkButton';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { Txtfield, DropdownMenu, DropdownItem, BtnPrimary } from '../components/shared/styled';\nimport 'react-tabs/style/react-tabs.css';\nimport './../sass/pages/_applyJob.scss';\nimport Footer from '../components/shared/footer';\nimport { usePostForm, usePostJob } from '../hooks/usePostJob';\nimport { useTab } from '../hooks/useTab';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { PostJob } from '../types/post_job';\nimport { get } from 'lodash';\nimport { postulateJob } from '../util/job.service';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { getCategory, getSkillForCategory } from '../util/publication.service';\nimport { Category } from '../interfaces/Category';\nimport { Response } from '../interfaces/Response';\nimport { Skill, SkillSelect } from '../interfaces/Skill';\nimport { TagComponent } from '../components/shared/atom/tag';\nimport { clearOneLocalStorage, getLocalStorage } from '../helpers/localStorage';\nimport { CREATE_USER, TEM_USER, USER_EXISTING } from '../helpers/constants';\nimport { register } from '../util/auth.service';\n\nexport const RegisterPostulant = () => {\n\tconst navigate = useNavigate();\n\tconst [loading, setLoading] = useState(false);\n\tconst [categorys, setCategorys] = useState<Category[]>([]);\n\tconst [skills, setSkills] = useState<SkillSelect[]>([]);\n\t// const { handleForm, reset } = usePostForm();\n\n\tconst [form, setForm] = React.useState({\n\t\tdocumentType: '',\n\t\tdocumentNumber: '',\n\t\tcategory: '',\n\t\tskillsIds: [],\n\t\ttypeBio: '',\n\t\tlinkBio: '',\n\t\texperience: [],\n\t\tproject: '',\n\t\ttimeProject: '',\n\t\tfunctions: '',\n\t});\n\n\tconst reset = () => {\n\t\tsetForm({\n\t\t\tdocumentType: '',\n\t\t\tdocumentNumber: '',\n\t\t\tcategory: '',\n\t\t\tskillsIds: [],\n\t\t\ttypeBio: '',\n\t\t\tlinkBio: '',\n\t\t\texperience: [],\n\t\t\tproject: '',\n\t\t\ttimeProject: '',\n\t\t\tfunctions: '',\n\t\t});\n\t};\n\n\t// const navigate = useNavigate();\n\tconst { selectedTab, handleNextTab, setSelectedTab } = useTab();\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait getCategoryAll();\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// console.log('listar categoria');\n\t\t// console.log(form.category);\n\t\t(async () => {\n\t\t\tawait getSkillsForCategory(form.category);\n\t\t})();\n\t}, [form.category]);\n\n\tconst getSkillsForCategory = async (idCategory: string) => {\n\t\tconst response = await getSkillForCategory({ idCategory });\n\t\tif (response.status) {\n\t\t\tconst newData: SkillSelect[] = response?.data.skillGeneral.map((s) => {\n\t\t\t\treturn { _id: s._id, nameSkill: s.nameSkill, select: false };\n\t\t\t});\n\t\t\tconst uniquesSkills = [...new Map(newData.map((i: SkillSelect) => [i._id, i])).values()];\n\t\t\t// console.log({ uniquesSkills });\n\t\t\tsetSkills([...uniquesSkills]);\n\t\t}\n\t};\n\n\tconst handleForm = (event: any) => {\n\t\tsetForm({\n\t\t\t...form,\n\t\t\t[event.target.name]: event.target.value,\n\t\t});\n\t};\n\n\tconst getCategoryAll = async () => {\n\t\tconst response: Response = await getCategory();\n\t\tconsole.log({ response });\n\t\tif (response.status) setCategorys(response?.data);\n\t};\n\n\tconst handleRegister2 = async (e: any) => {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tconst tempUser = getLocalStorage(TEM_USER);\n\t\t// console.log({ tempUser });\n\t\tconst skillSelect: string[] = [];\n\t\tskills.filter((s: SkillSelect) => s.select && skillSelect.push(s._id));\n\t\tconst selectCategory = categorys.find((c: Category) => {\n\t\t\treturn c._id === form.category;\n\t\t});\n\t\tconst dataSend = {\n\t\t\t...tempUser,\n\t\t\tdataUser: {\n\t\t\t\t...tempUser.dataUser,\n\t\t\t\t...form,\n\t\t\t\tcategory: selectCategory,\n\t\t\t\tskillsIds: [...skillSelect],\n\t\t\t},\n\t\t};\n\n\t\tconsole.log({ dataSend });\n\n\t\tconst response = await register(dataSend);\n\n\t\tswitch (response.data.message) {\n\t\t\tcase CREATE_USER:\n\t\t\t\tclearOneLocalStorage(TEM_USER);\n\t\t\t\treset();\n\t\t\t\ttoast.success('Se creo el usuario correctamente...');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\tnavigate('/login', { replace: true });\n\t\t\t\t}, 2000);\n\t\t\t\treturn;\n\t\t\tcase USER_EXISTING:\n\t\t\t\ttoast.error('el usuario ya existe');\n\t\t\t\t// alert('el usuario ya existe');\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\ttoast.error('error en el servidor');\n\t\t\t\t// alert('Error corregir esto :c');\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst selectItemSkill = (skill: SkillSelect) => {\n\t\tconst newData: SkillSelect[] = [];\n\t\tskills.filter((s: SkillSelect) => {\n\t\t\tif (s._id === skill._id) {\n\t\t\t\ts.select = !s.select;\n\t\t\t}\n\t\t\tnewData.push(s);\n\t\t});\n\t\tsetSkills([...newData]);\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{/* <Backdrop\n\t\t\t\topen={loading!}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: 'white',\n\t\t\t\t\tzIndex: 99,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CircularProgress color=\"inherit\" />\n\t\t\t</Backdrop> */}\n\t\t\t<Header />\n\t\t\t<Toaster position=\"top-right\" reverseOrder={false} />\n\t\t\t<form>\n\t\t\t\t<section className=\"applyJob\">\n\t\t\t\t\t<aside className=\"coverHeader mb-5\">\n\t\t\t\t\t\t{/* <h1 className=\"mb-2\">{get(_postJob, 'title', '')}</h1>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<i>{get(_postJob.dataCompany, 'businessName', '')}</i>\n\t\t\t\t\t\t</p> */}\n\t\t\t\t\t</aside>\n\t\t\t\t\t<aside className=\"contain\">\n\t\t\t\t\t\t<Tabs selectedIndex={selectedTab} onSelect={(index) => setSelectedTab(index)}>\n\t\t\t\t\t\t\t<TabList className={'mb-5'}>\n\t\t\t\t\t\t\t\t<Tab tabIndex={'0'}>Datos generales</Tab>\n\t\t\t\t\t\t\t\t<Tab tabIndex={'1'}>Skills</Tab>\n\t\t\t\t\t\t\t\t<Tab tabIndex={'2'}>Experiencia</Tab>\n\t\t\t\t\t\t\t</TabList>\n\t\t\t\t\t\t\t<TabPanel tabIndex={0}>\n\t\t\t\t\t\t\t\t<section className=\"formApply pt-5\">\n\t\t\t\t\t\t\t\t\t<article className=\"mb-5\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"mb-3\">Comprobante de pago a emitir</p>\n\t\t\t\t\t\t\t\t\t\t<aside className=\"FormGroup\">\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenu onChange={handleForm} name=\"documentType\" value={form.documentType}>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem>Elige el tipo de documento</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem value=\"1\">RUC</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem value=\"2\">DNI</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t<Txtfield className=\"ml-5\" placeholder=\"Nro de documento\" name=\"documentNumber\" onChange={handleForm} value={form.documentNumber} />\n\t\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t<article className=\"footerSection\">\n\t\t\t\t\t\t\t\t\t\t<BtnPrimary type=\"button\" onClick={handleNextTab}>\n\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\tSiguiente{' '}\n\t\t\t\t\t\t\t\t\t\t</BtnPrimary>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t<TabPanel tabIndex={1}>\n\t\t\t\t\t\t\t\t<section className=\"formApply pt-5\">\n\t\t\t\t\t\t\t\t\t<article>\n\t\t\t\t\t\t\t\t\t\t<p className=\"mb-3\">Eligue tu especialidad</p>\n\t\t\t\t\t\t\t\t\t\t<aside className=\"FormGroup\">\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenu onChange={handleForm} name=\"category\" value={form.category}>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem>Eliga su especialidad</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t{categorys.map((category: Category) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem key={category._id} value={category._id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{category.nameCategory}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t<p>Elige las skills que mejor manejes</p>\n\t\t\t\t\t\t\t\t\t<article className=\"gridBox mt-4\">\n\t\t\t\t\t\t\t\t\t\t{/* {get(_postJob, 'listSkills', []).map((value) => (\n\t\t\t\t\t\t\t\t\t\t\t<CheckButton value={value} onChange={handleCheck} withbg=\"yes\" label={value.nameSkill} key={value._id} />\n\t\t\t\t\t\t\t\t\t\t))} */}\n\t\t\t\t\t\t\t\t\t\t{skills.map((e: SkillSelect) => (\n\t\t\t\t\t\t\t\t\t\t\t<TagComponent key={e._id} tag={e} select={e.select} event={(e: SkillSelect) => selectItemSkill(e)} />\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t<article className=\"footerSection\">\n\t\t\t\t\t\t\t\t\t\t<BtnPrimary type=\"button\" onClick={handleNextTab}>\n\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\tSiguiente{' '}\n\t\t\t\t\t\t\t\t\t\t</BtnPrimary>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t<TabPanel tabIndex={2}>\n\t\t\t\t\t\t\t\t<section className=\"formApply pt-5\">\n\t\t\t\t\t\t\t\t\t<article className=\"mb-5\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"mb-3 text-center\">Enlace digital de experiencia laboral (Certijoven, Linkedin, Web, etc)</p>\n\t\t\t\t\t\t\t\t\t\t<aside className=\"FormGroup\">\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenu onChange={handleForm} name=\"typeBio\" value={form.typeBio}>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem>Seleccione tipo de enlace </DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem value=\"1\">Linkedin</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownItem value=\"2\">Web</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t\t<Txtfield className=\"ml-5\" placeholder=\"Ingrese enlace\" onChange={handleForm} name=\"linkBio\" value={form.linkBio} />\n\t\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t<article className=\"mb-5\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-center mb-3\">ó , coloca tu experiencia respecto al puesto que buscamos</p>\n\t\t\t\t\t\t\t\t\t\t<aside className=\"FormGroup\">\n\t\t\t\t\t\t\t\t\t\t\t<Txtfield className=\"mr-5\" placeholder=\"Proyecto\" onChange={handleForm} name=\"project\" value={form.project} />\n\t\t\t\t\t\t\t\t\t\t\t<Txtfield className=\"\" placeholder=\"Tiempo de trabajo\" onChange={handleForm} name=\"timeProject\" value={form.timeProject} />\n\t\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t\t\t<aside className=\"FormGroup-full mt-4\">\n\t\t\t\t\t\t\t\t\t\t\t<Txtfield placeholder=\"Funciones que realizaste\" onChange={handleForm} name=\"functions\" value={form.functions} />\n\t\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t\t</article>\n\n\t\t\t\t\t\t\t\t\t<article className=\"footerSection\">\n\t\t\t\t\t\t\t\t\t\t{/* <BtnPrimary type=\"submit\"> Registrar </BtnPrimary> */}\n\t\t\t\t\t\t\t\t\t\t<BtnPrimary disabled={loading} onClick={handleRegister2}>\n\t\t\t\t\t\t\t\t\t\t\tRegistrar\n\t\t\t\t\t\t\t\t\t\t</BtnPrimary>\n\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</form>\n\t\t\t<Footer />\n\t\t</React.Fragment>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}